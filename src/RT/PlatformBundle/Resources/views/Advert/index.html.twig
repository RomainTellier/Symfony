{% extends "RTPlatformBundle::layout.html.twig" %}

{% block title %}
  Accueil - {{ parent() }}
{% endblock %}

{% block rtplatform_body %}

  <h2>Liste des thèmes</h2>
<table class="table table-striped table-responsive">
    <thead>
    <tr>
        <th>N°</th>
        <th>Thème</th>
        <th>Nombre discussion</th>
        <th>Date dernière discussion</th>
        <th>Heure dernière discussion</th>
    </tr>
    </thead>
    <tbody>
    {% for theme in themesList %}
        <tr>
        <td>
            <a href="{{ path('rt_platform_view', {'id': theme.id}) }}">
                {{ theme.id }} </a>
        </td>
            <td> <a href="{{ path('rt_platform_view', {'id': theme.id}) }}">{{ theme.titre }}</a> </td>

            <td>  <span> {{ theme.discussions|length }} </span> </td>

                {% if theme.discussions|length > 0 %}
                    <td>  <span> {{ theme.discussions.last.date|date('d-m-Y') }}</span> </td>
                    <td> <span>  {{ theme.discussions.last.heure|date('H:i:s') }}</span> </td>

                {% endif %}
    {% else %}
        <td>Pas encore de thèmes !</td>
    {% endfor %}
        </tr>
    </tbody>
</table>

    <div class="text-center">
        <ul class="pagination">
            {% if pagination.page>0 %}
                <li><a href="{{ path(pagination.route,
                    pagination.route_params|merge({'page': 0})) }}"><<</a></li>
                <li><a href="{{ path(pagination.route,
                    pagination.route_params|merge({'page': pagination.page-1})) }}"><</a></li>
            {% endif %}
            {% for p in range(max(pagination.page-8, 0),
            min(pagination.page+4, pagination.pages_count)) %}
                <li {% if p == pagination.page %} class="active"{% endif %}><a href="{{ path(pagination.route,
                    pagination.route_params|merge({'page': p})) }}">{{ p }}</a></li>
            {% endfor %}
            {% if pagination.page<pagination.pages_count %}
                <li><a href="{{ path(pagination.route,
                    pagination.route_params|merge({'page': pagination.page+1})) }}">></a></li>
                <li><a href="{{ path(pagination.route,
                    pagination.route_params|merge({'page': pagination.pages_count})) }}">>></a></li>
            {% endif %}
        </ul>
    </div>

{% endblock %}
